<article>
  <%if(item.link){%>
  
    <%if(item.title){%>
     <h3 class="article-title"><%=item.title %></h3>
    <%} else { %>
    <h3 class="article-title"><a href="<%-item.link %>"><span><%= item.link %></span></a></h3>
    <% } %>
    <%} else { %>
    <%if(index) {%>
    <h3 class="article-title"><a href="<%- config.root %><%- item.path %>"><span><%= item.title %></span></a></h3>
    <% } else { %>
    <h3 class="article-title"><span><%= item.title %></span></h3>
    <% } %>
  <% } %>
  <div class="article-top-meta">
    <span class="posted-on">
      <a href="<%- config.root %><%- item.path %>" rel="bookmark">
        <time class="entry-date published" datetime="<%= item.date.toDate().toISOString() %>">
          <%= item.date.format(config.date_format) %>
        </time>
      </a>
    </span>
  </div>
   <% if (item.photos && item.photos.length){ %>
  <div class="featured-media">
    <% if (item.photos.length && !index){ %>
    <% for (var i in item.photos) { %>
    <img src="<%- url_for(item.photos[i]) %>" class="attachment-post-thumbnail size-post-thumbnail">
    <% } %>
    <% } else if (item.photos.length && index){ %>
    <img src="<%- url_for(item.photos[0]) %>" class="attachment-post-thumbnail size-post-thumbnail">
    <% } else { %>
    <img src="<%- url_for(item.photos) %>" class="attachment-post-thumbnail size-post-thumbnail">
    <% } %>
  </div>
  <% } %>

  <div class="article-content">
    <div class="entry">
      <% if (item.excerpt && index){ %>
        <%- item.excerpt %>
      <% } else { %>
        <%- item.content %>
      <% } %>
    </div>
  </div>
  <div class="article-footer"> 
    <div class="pull-left">
      <% if (item.categories && item.categories.length){ %>
      <%
        const cats = [];
        item.categories.map((item) => {
          cats.push('<a href="'+ config.root + item.path + '">' + item.name + '</a>');
        });
      %>
      <span class="post-categories">
        <i class="icon-categories"></i>
        <%- cats.join(', '); %>
      </span>
      <% } %>

  <% if (item.tags && item.tags.length){ %>
      <%
        const tags = [];
        item.tags.map((item) => {
          tags.push('<a href="'+ config.root + item.path + '">' + item.name + '</a>');
        });
      %>
      <span class="post-tag">
        <i class="icon-tags"></i>
        <%- tags.join(', '); %>
      </span>
      <% } %>
    </div>
    <div class="pull-right">
      <i class="icon-comments"> </i>
    </div>
  </div> 
</article>